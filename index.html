<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>30 Days of Christmas With You üéÑ‚ù§Ô∏è</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      --bg: #050814;
      --card: #101828;
      --accent: #f97373;
      --accent-soft: rgba(249,115,115,0.25);
      --accent-2: #22c55e;
      --text: #f9fafb;
      --text-soft: #9ca3af;
      --border: rgba(148,163,184,0.4);
      --shadow-soft: 0 18px 40px rgba(15,23,42,0.9);
      --radius-xl: 18px;
      --radius-2xl: 26px;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text",
        "Segoe UI", sans-serif;
      background: radial-gradient(circle at top, #1f2933 0, #020617 55%, #000 100%);
      color: var(--text);
      min-height: 100vh;
      display: flex;
      align-items: stretch;
      justify-content: center;
      padding: 24px 12px 40px;
    }

    /* LOGIN SCREEN */
    .login-screen {
      position: fixed;
      inset: 0;
      background: radial-gradient(circle at top, #0f172a 0, #020617 60%, #000 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
      z-index: 100;
    }

    #admin-screen {
      z-index: 110;
      display: none;
    }

    .login-card {
      width: 100%;
      max-width: 420px;
      background: radial-gradient(circle at top, rgba(15,23,42,0.98), rgba(15,23,42,1));
      border-radius: 26px;
      border: 1px solid rgba(148,163,184,0.7);
      box-shadow: 0 22px 50px rgba(15,23,42,1);
      padding: 20px 18px 18px;
      position: relative;
      overflow: hidden;
    }

    .admin-card {
      max-width: 700px;
      padding-bottom: 22px;
    }

    .login-orb {
      position: absolute;
      border-radius: 999px;
      filter: blur(40px);
      opacity: 0.8;
      pointer-events: none;
      mix-blend-mode: screen;
    }

    .login-orb.red {
      background: #f97373;
      width: 200px;
      height: 200px;
      top: -60px;
      right: -40px;
    }
    .login-orb.green {
      background: #22c55e;
      width: 180px;
      height: 180px;
      bottom: -60px;
      left: -40px;
    }

    .login-inner {
      position: relative;
      z-index: 1;
    }

    .login-title {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 20px;
      font-weight: 700;
      margin-bottom: 4px;
    }

    .login-title span.icon {
      font-size: 22px;
    }

    .login-subtitle {
      font-size: 13px;
      color: var(--text-soft);
      margin-bottom: 14px;
    }

    .login-label {
      font-size: 12px;
      color: var(--text-soft);
      margin-bottom: 4px;
    }

    .login-input-wrap {
      border-radius: 999px;
      border: 1px solid rgba(148,163,184,0.7);
      background: rgba(15,23,42,0.96);
      padding: 4px 6px 4px 10px;
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 10px;
    }

    .login-input-wrap span {
      font-size: 14px;
    }

    .login-input-wrap input {
      flex: 1;
      border: none;
      outline: none;
      background: transparent;
      color: var(--text);
      font-size: 13px;
    }

    .login-input-wrap input::placeholder {
      color: rgba(148,163,184,0.8);
    }

    .login-btn {
      width: 100%;
      border-radius: 999px;
      border: none;
      padding: 8px 10px;
      font-size: 13px;
      font-weight: 500;
      background: linear-gradient(135deg, var(--accent), #fb7185);
      color: white;
      cursor: pointer;
      box-shadow: 0 14px 26px rgba(251,113,133,0.6);
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      margin-top: 4px;
    }

    .login-btn span.icon {
      font-size: 16px;
    }

    .login-hint {
      margin-top: 10px;
      font-size: 11px;
      color: var(--text-soft);
      line-height: 1.4;
    }

    .login-error {
      font-size: 11px;
      color: #fecaca;
      margin-top: 4px;
      min-height: 14px;
    }

    .login-badge-row {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-bottom: 10px;
    }

    .login-badge {
      font-size: 11px;
      padding: 3px 8px;
      border-radius: 999px;
      border: 1px solid rgba(148,163,184,0.5);
      background: rgba(15,23,42,0.9);
      display: inline-flex;
      align-items: center;
      gap: 5px;
      color: var(--text-soft);
    }

    .login-badge span.icon {
      font-size: 13px;
    }

    .admin-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 10px;
      margin-bottom: 8px;
    }

    .admin-close {
      border-radius: 999px;
      border: 1px solid rgba(148,163,184,0.7);
      background: rgba(15,23,42,0.9);
      color: rgba(209,213,219,0.95);
      padding: 4px 8px;
      font-size: 11px;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 4px;
    }

    .admin-content {
      margin-top: 10px;
      max-height: 320px;
      overflow-y: auto;
      font-size: 12px;
      color: var(--text-soft);
      border-top: 1px dashed rgba(55,65,81,0.9);
      padding-top: 8px;
    }

    .admin-summary {
      margin-bottom: 10px;
      font-size: 12px;
    }

    .admin-table-wrapper {
      overflow-x: auto;
    }

    table.admin-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 11px;
      margin-top: 6px;
    }

    table.admin-table th,
    table.admin-table td {
      border: 1px solid rgba(51,65,85,0.9);
      padding: 4px 6px;
      text-align: left;
      vertical-align: top;
    }

    table.admin-table th {
      background: rgba(15,23,42,0.9);
      color: rgba(226,232,240,0.95);
      position: sticky;
      top: 0;
      z-index: 1;
    }

    table.admin-table tr:nth-child(even) {
      background: rgba(15,23,42,0.8);
    }

    .admin-actions {
      display: flex;
      justify-content: flex-end;
      margin-bottom: 8px;
    }

    .admin-reset {
      border-radius: 999px;
      border: 1px solid rgba(248,113,113,0.8);
      background: radial-gradient(circle at top, rgba(127,29,29,0.95), rgba(15,23,42,1));
      color: #fee2e2;
      font-size: 11px;
      padding: 4px 10px;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      box-shadow: 0 10px 22px rgba(127,29,29,0.8);
    }

    .admin-reset:hover {
      filter: brightness(1.05);
    }

    .admin-reset:active {
      transform: scale(0.97);
    }

    /* MAIN APP */

    .app {
      width: 100%;
      max-width: 1080px;
      background: linear-gradient(145deg, rgba(15,23,42,0.92), rgba(7,16,31,0.96));
      border-radius: 28px;
      box-shadow: var(--shadow-soft);
      border: 1px solid rgba(148,163,184,0.3);
      padding: 20px 18px 24px;
      position: relative;
      overflow: hidden;
      display: none; /* hidden until login */
    }

    @media (min-width: 768px) {
      .app {
        padding: 24px 26px 32px;
      }
    }

    /* Glow orbs */
    .orb {
      position: absolute;
      border-radius: 999px;
      filter: blur(40px);
      opacity: 0.8;
      pointer-events: none;
      mix-blend-mode: screen;
    }

    .orb.red {
      background: #f97373;
      width: 220px;
      height: 220px;
      top: -60px;
      right: -40px;
    }
    .orb.green {
      background: #22c55e;
      width: 200px;
      height: 200px;
      top: 40%;
      left: -60px;
    }
    .orb.blue {
      background: #38bdf8;
      width: 240px;
      height: 240px;
      bottom: -80px;
      right: 10%;
    }

    .app-inner {
      position: relative;
      z-index: 1;
    }

    header {
      display: flex;
      flex-direction: column;
      gap: 14px;
      margin-bottom: 18px;
    }

    @media (min-width: 768px) {
      header is {
        flex-direction: row;
        align-items: center;
        justify-content: space-between;
      }
    }

    header {
      /* fix stray selector above */
      display: flex;
      flex-direction: column;
      gap: 14px;
      margin-bottom: 18px;
    }

    @media (min-width: 768px) {
      header {
        flex-direction: row;
        align-items: center;
        justify-content: space-between;
      }
    }

    .title-block {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .badge-row {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-bottom: 4px;
    }

    .badge {
      font-size: 11px;
      padding: 4px 9px;
      border-radius: 999px;
      border: 1px solid rgba(248,250,252,0.1);
      background: rgba(15,23,42,0.85);
      display: inline-flex;
      align-items: center;
      gap: 5px;
      color: var(--text-soft);
    }

    .badge span.icon {
      font-size: 13px;
    }

    h1 {
      font-size: 22px;
      font-weight: 700;
      letter-spacing: 0.02em;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    h1 span.emojis {
      font-size: 22px;
    }

    @media (min-width: 768px) {
      h1 {
        font-size: 26px;
      }
    }

    .subtitle {
      font-size: 13px;
      color: var(--text-soft);
      max-width: 530px;
      line-height: 1.5;
    }

    .name-form {
      background: rgba(15,23,42,0.9);
      border-radius: var(--radius-xl);
      border: 1px solid rgba(148,163,184,0.45);
      padding: 10px 12px;
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      align-items: center;
      justify-content: space-between;
    }

    @media (min-width: 768px) {
      .name-form {
        padding: 10px 14px;
      }
    }

    .name-form label {
      font-size: 12px;
      color: var(--text-soft);
      white-space: nowrap;
    }

    .name-right {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      align-items: center;
      justify-content: flex-end;
      flex: 1;
    }

    .pill {
      position: relative;
      flex: 1;
      min-width: 160px;
      border-radius: 999px;
      background: radial-gradient(circle at top left, rgba(148,163,184,0.35), rgba(15,23,42,1));
      padding: 2px;
      overflow: hidden;
    }

    .pill-inner {
      display: flex;
      align-items: center;
      gap: 6px;
      padding: 4px 9px 4px 9px;
      border-radius: 999px;
      background: rgba(15,23,42,0.96);
    }

    .pill input {
      background: transparent;
      border: none;
      outline: none;
      font-size: 13px;
      color: var(--text);
      flex: 1;
    }

    .pill input::placeholder {
      color: rgba(148,163,184,0.8);
    }

    .pill-button {
      border: none;
      border-radius: 999px;
      padding: 4px 10px;
      font-size: 11px;
      background: linear-gradient(135deg, var(--accent), #fb7185);
      color: white;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 4px;
      box-shadow: 0 10px 22px rgba(251,113,133,0.45);
      white-space: nowrap;
    }

    .pill-button span {
      font-size: 13px;
    }

    .love-points-pill {
      font-size: 11px;
      border-radius: 999px;
      padding: 5px 10px;
      border: 1px solid rgba(248,250,252,0.35);
      background: rgba(15,23,42,0.9);
      display: inline-flex;
      align-items: center;
      gap: 6px;
      color: #fecaca;
      white-space: nowrap;
    }

    .love-points-pill span.icon {
      font-size: 14px;
    }

    .love-points-pill strong {
      color: #fee2e2;
      font-size: 12px;
    }

    /* Progress bar */
    .progress-wrapper {
      margin-top: 8px;
      font-size: 11px;
      color: var(--text-soft);
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .progress-bar {
      width: 100%;
      height: 6px;
      border-radius: 999px;
      background: rgba(30,41,59,0.9);
      overflow: hidden;
    }

    .progress-fill {
      height: 100%;
      width: 0%;
      border-radius: 999px;
      background: linear-gradient(90deg, var(--accent), #fb7185);
      transition: width 0.2s ease-out;
    }

    /* Calendar area */
    .layout {
      display: grid;
      gap: 18px;
      margin-top: 18px;
    }

    @media (min-width: 900px) {
      .layout {
        grid-template-columns: 1.1fr 0.9fr;
        align-items: flex-start;
      }
    }

    .calendar-card {
      background: radial-gradient(circle at top, rgba(15,23,42,0.95), rgba(15,23,42,0.98));
      border-radius: var(--radius-2xl);
      border: 1px solid rgba(148,163,184,0.55);
      padding: 14px 14px 16px;
      position: relative;
      overflow: hidden;
    }

    .calendar-card:before {
      content: "";
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at top left, rgba(248,250,252,0.12), transparent 60%);
      opacity: 0.4;
      pointer-events: none;
    }

    .calendar-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 10px;
      margin-bottom: 14px;
      position: relative;
      z-index: 1;
    }

    .calendar-header-left {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .calendar-title {
      font-size: 14px;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .calendar-title span {
      font-size: 18px;
    }

    .calendar-sub {
      font-size: 12px;
      color: var(--text-soft);
    }

    .calendar-badge {
      font-size: 11px;
      padding: 4px 8px;
      border-radius: 999px;
      border: 1px solid rgba(74,222,128,0.5);
      background: rgba(22,163,74,0.12);
      color: #bbf7d0;
      display: inline-flex;
      align-items: center;
      gap: 5px;
    }

    .calendar-badge span.icon {
      font-size: 13px;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(5, minmax(0, 1fr));
      gap: 8px;
      position: relative;
      z-index: 1;
    }

    @media (min-width: 640px) {
      .grid {
        grid-template-columns: repeat(6, minmax(0, 1fr));
      }
    }

    .day {
      position: relative;
      border-radius: 18px;
      padding: 10px 7px 9px;
      background: radial-gradient(circle at top, rgba(30,64,175,0.45), rgba(15,23,42,1));
      border: 1px solid rgba(148,163,184,0.6);
      cursor: pointer;
      overflow: hidden;
      transition: transform 0.16s ease, box-shadow 0.16s ease, border-color 0.16s ease,
        background 0.16s ease, translate 0.16s ease;
      display: flex;
      flex-direction: column;
      gap: 4px;
      min-height: 70px;
    }

    .day-main {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      gap: 4px;
    }

    .day-number {
      font-size: 18px;
      font-weight: 700;
    }

    .day-emoji {
      font-size: 17px;
      margin-left: 2px;
    }

    .day-tag {
      font-size: 10px;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: var(--text-soft);
    }

    .day-footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 10px;
      margin-top: 2px;
      color: rgba(209,213,219,0.85);
    }

    .day-status {
      display: inline-flex;
      align-items: center;
      gap: 4px;
    }

    .dot {
      width: 6px;
      height: 6px;
      border-radius: 999px;
      background: #22c55e;
      box-shadow: 0 0 0 4px rgba(34,197,94,0.25);
    }

    .day-cta {
      font-size: 10px;
      opacity: 0.9;
    }

    .day.locked {
      cursor: default;
      background: radial-gradient(circle at top, rgba(15,23,42,0.9), rgba(15,23,42,1));
      border-style: dashed;
      border-color: rgba(75,85,99,0.9);
      color: rgba(148,163,184,0.9);
    }

    .day.locked .dot {
      background: #4b5563;
      box-shadow: none;
    }

    .day.locked .day-emoji {
      opacity: 0.7;
    }

    .day.today {
      border-color: rgba(248,250,252,0.85);
      box-shadow: 0 0 0 1px rgba(248,250,252,0.4), 0 15px 30px rgba(15,23,42,1);
      background: radial-gradient(circle at top, rgba(248,250,252,0.12), rgba(30,64,175,0.5));
      translate: 0 -1px;
    }

    .day.completed {
      border-color: rgba(249,115,115,0.9);
      box-shadow: 0 0 0 1px rgba(249,115,115,0.4), 0 16px 30px rgba(15,23,42,1);
      background: radial-gradient(circle at top, rgba(249,115,115,0.12), rgba(30,64,175,0.6));
    }

    .day.completed .day-tag {
      color: #fecaca;
    }

    .day.completed .dot {
      background: #f97373;
      box-shadow: 0 0 0 4px rgba(248,113,113,0.3);
    }

    .day.completed .day-cta {
      color: #fecaca;
    }

    .day:hover:not(.locked) {
      transform: translateY(-2px) scale(1.01);
      box-shadow: 0 16px 32px rgba(15,23,42,0.9);
      border-color: rgba(248,250,252,0.7);
    }

    .day.locked:hover {
      transform: none;
      box-shadow: none;
    }

    /* Right side: Preview & tips */

    .side-card {
      background: radial-gradient(circle at top, rgba(15,23,42,0.95), rgba(15,23,42,0.98));
      border-radius: var(--radius-2xl);
      border: 1px solid rgba(148,163,184,0.55);
      padding: 14px 14px 16px;
      position: relative;
      overflow: hidden;
    }

    .side-top {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 10px;
      gap: 10px;
    }

    .side-title {
      font-size: 14px;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .side-title span {
      font-size: 16px;
    }

    .side-tagline {
      font-size: 12px;
      color: var(--text-soft);
    }

    .side-pill {
      font-size: 11px;
      border-radius: 999px;
      padding: 4px 8px;
      border: 1px solid rgba(248,250,252,0.3);
      background: rgba(15,23,42,0.85);
      display: inline-flex;
      align-items: center;
      gap: 5px;
      color: var(--text-soft);
    }

    .preview-bubble {
      margin-top: 10px;
      background: linear-gradient(145deg, rgba(30,64,175,0.75), rgba(15,23,42,0.98));
      border-radius: 18px;
      padding: 10px 11px 11px;
      border: 1px solid rgba(191,219,254,0.5);
      box-shadow: 0 16px 30px rgba(15,23,42,0.9);
      position: relative;
      overflow: hidden;
    }

    .preview-bubble::before {
      content: "";
      position: absolute;
      inset: -40px;
      background-image: radial-gradient(circle at 10px 10px, rgba(248,250,252,0.4) 0, transparent 55%);
      opacity: 0.4;
      pointer-events: none;
    }

    .preview-bubble-inner {
      position: relative;
      z-index: 1;
      display: flex;
      gap: 9px;
      align-items: flex-start;
    }

    .pfp {
      width: 40px;
      height: 40px;
      border-radius: 999px;
      background: radial-gradient(circle at top, #f97373, #f97316);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 22px;
      box-shadow: 0 12px 24px rgba(15,23,42,0.95);
      flex-shrink: 0;
    }

    .preview-text-block {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .preview-name-row {
      display: flex;
      align-items: center;
      gap: 6px;
      font-size: 12px;
    }

    .preview-name-row strong {
      font-weight: 600;
    }

    .preview-name-row span.dot-sep {
      width: 3px;
      height: 3px;
      border-radius: 999px;
      background: rgba(226,232,240,0.8);
    }

    .preview-name-row span.time {
      color: rgba(226,232,240,0.8);
      font-size: 11px;
    }

    .preview-main {
      font-size: 13px;
      line-height: 1.5;
    }

    .preview-main span.emoji {
      font-size: 15px;
    }

    .preview-meta {
      font-size: 11px;
      color: #bfdbfe;
      margin-top: 5px;
    }

    .tips-list {
      margin-top: 12px;
      font-size: 11px;
      color: var(--text-soft);
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .tips-list li {
      list-style: none;
      display: flex;
      gap: 6px;
      align-items: flex-start;
    }

    .tips-list span.bullet {
      font-size: 12px;
      margin-top: 1px;
    }

    footer {
      margin-top: 14px;
      font-size: 10px;
      color: rgba(148,163,184,0.9);
      display: flex;
      justify-content: space-between;
      gap: 8px;
      flex-wrap: wrap;
      align-items: center;
    }

    footer span.hero {
      color: rgba(248,250,252,0.95);
    }

    .admin-link {
      border: none;
      background: transparent;
      font-size: 10px;
      color: rgba(148,163,184,0.9);
      text-decoration: underline;
      cursor: pointer;
      padding: 0;
    }

    /* Modal */
    .modal-backdrop {
      position: fixed;
      inset: 0;
      background: rgba(15,23,42,0.92);
      display: none;
      align-items: center;
      justify-content: center;
      padding: 18px;
      z-index: 50;
    }

    .modal-backdrop.active {
      display: flex;
    }

    .modal {
      width: 100%;
      max-width: 520px;
      background: radial-gradient(circle at top, rgba(15,23,42,0.98), rgba(15,23,42,1));
      border-radius: 26px;
      border: 1px solid rgba(148,163,184,0.8);
      box-shadow: 0 22px 45px rgba(15,23,42,1);
      padding: 16px 16px 16px;
      position: relative;
      max-height: min(560px, 90vh);
      overflow: hidden;
      display: flex;
      flex-direction: column;
    }

    @media (min-width: 640px) {
      .modal {
        padding: 18px 18px 18px;
      }
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 10px;
      margin-bottom: 8px;
    }

    .modal-header-main {
      display: flex;
      align-items: center;
      gap: 9px;
    }

    .modal-day-pill {
      border-radius: 999px;
      padding: 3px 8px;
      font-size: 10px;
      border: 1px solid rgba(148,163,184,0.7);
      color: var(--text-soft);
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .modal-day-pill span.emoji {
      font-size: 14px;
    }

    .modal-title {
      font-size: 15px;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .modal-title span.day-num {
      font-size: 18px;
    }

    .modal-close {
      border-radius: 999px;
      border: 1px solid rgba(148,163,184,0.8);
      background: rgba(15,23,42,0.85);
      color: rgba(209,213,219,0.95);
      padding: 5px 9px;
      font-size: 11px;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 5px;
    }

    .modal-close span.icon {
      font-size: 13px;
    }

    .modal-body {
      margin-top: 4px;
      padding-top: 8px;
      border-top: 1px dashed rgba(55,65,81,0.9);
      font-size: 13px;
      line-height: 1.6;
      overflow-y: auto;
      padding-right: 2px;
    }

    .wish-text {
      margin-bottom: 10px;
    }

    .wish-text p + p {
      margin-top: 5px;
    }

    .activity-block {
      margin-top: 10px;
      padding: 8px 9px 9px;
      border-radius: 18px;
      border: 1px solid rgba(148,163,184,0.7);
      background: radial-gradient(circle at top, rgba(15,23,42,0.95), rgba(15,23,42,1));
    }

    .activity-header {
      font-size: 12px;
      font-weight: 600;
      margin-bottom: 4px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 6px;
    }

    .activity-header span.label {
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .activity-header span.icon {
      font-size: 15px;
    }

    .activity-badge {
      font-size: 10px;
      border-radius: 999px;
      padding: 2px 7px;
      border: 1px solid rgba(248,250,252,0.35);
      color: rgba(226,232,240,0.95);
    }

    .activity-body {
      font-size: 12px;
      margin-top: 4px;
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .activity-options {
      display: flex;
      flex-direction: column;
      gap: 6px;
      margin-top: 4px;
    }

    .option-row {
      border-radius: 999px;
      border: 1px solid rgba(148,163,184,0.8);
      padding: 4px 8px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 6px;
      background: rgba(15,23,42,0.98);
      cursor: pointer;
      transition: border-color 0.15s ease, background 0.15s ease, box-shadow 0.15s ease;
    }

    .option-row span.text {
      font-size: 12px;
    }

    .option-btn {
      border-radius: 999px;
      border: none;
      padding: 3px 8px;
      font-size: 11px;
      background: rgba(248,250,252,0.06);
      color: rgba(248,250,252,0.95);
      cursor: pointer;
    }

    .option-btn:active {
      transform: scale(0.97);
    }

    .option-row.selected {
      border-color: rgba(249,115,115,0.95);
      background: radial-gradient(circle at top, rgba(249,115,115,0.22), rgba(15,23,42,1));
      box-shadow: 0 0 0 1px rgba(248,250,252,0.18);
    }

    .activity-note {
      font-size: 11px;
      color: rgba(156,163,175,0.95);
    }

    .compliment-output {
      margin-top: 4px;
      font-size: 12px;
      color: #f9a8d4;
    }

    .primary-btn {
      border-radius: 999px;
      border: none;
      padding: 5px 10px;
      font-size: 12px;
      background: linear-gradient(135deg, var(--accent), #fb7185);
      color: white;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      box-shadow: 0 10px 22px rgba(251,113,133,0.55);
      margin-top: 6px;
    }

    .primary-btn span.icon {
      font-size: 15px;
    }

    .primary-btn.disabled {
      opacity: 0.6;
      cursor: default;
      box-shadow: none;
    }

    .mood-slider-row {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-top: 4px;
    }

    .mood-slider-row input[type="range"] {
      flex: 1;
    }

    .mood-label {
      font-size: 12px;
      color: #bfdbfe;
      min-width: 90px;
      text-align: center;
    }

    .quiz-text {
      font-size: 12px;
      color: var(--text-soft);
    }

    .answer-block {
      margin-top: 6px;
      display: flex;
      flex-direction: column;
      gap: 4px;
      font-size: 11px;
      color: var(--text-soft);
    }

    .answer-block textarea {
      width: 100%;
      min-height: 60px;
      border-radius: 12px;
      border: 1px solid rgba(148,163,184,0.7);
      background: rgba(15,23,42,0.98);
      color: var(--text);
      font-size: 12px;
      padding: 6px 8px;
      resize: vertical;
      outline: none;
    }

    .answer-block textarea::placeholder {
      color: rgba(148,163,184,0.8);
    }

    .tiny {
      font-size: 11px;
      color: var(--text-soft);
      margin-top: 6px;
    }

    ::-webkit-scrollbar {
      width: 8px;
    }
    ::-webkit-scrollbar-track {
      background: transparent;
    }
    ::-webkit-scrollbar-thumb {
      background: rgba(55,65,81,0.95);
      border-radius: 999px;
    }
  </style>
</head>
<body>
  <!-- LOGIN OVERLAY -->
  <div class="login-screen" id="login-screen">
    <div class="login-card">
      <div class="login-orb red"></div>
      <div class="login-orb green"></div>
      <div class="login-inner">
        <div class="login-badge-row">
          <div class="login-badge"><span class="icon">üéÑ</span> Private Christmas space</div>
          <div class="login-badge"><span class="icon">üíå</span> Just for Rose</div>
          <div class="login-badge"><span class="icon">üîê</span> Secret code only</div>
        </div>
        <div class="login-title">
          <span class="icon">üéÖüèª</span>
          <span>Hi Rose, it‚Äôs our secret site</span>
        </div>
        <div class="login-subtitle">
          Enter the code I gave you. If it doesn‚Äôt work, bully me on chat and I‚Äôll fix it. üòå
        </div>

        <div class="login-label">Secret code</div>
        <div class="login-input-wrap">
          <span>üîë</span>
          <input
            id="login-password"
            type="password"
            placeholder="Type the magic password here"
          />
        </div>

        <button class="login-btn" id="login-button" type="button">
          <span class="icon">‚ú®</span>
          <span>Let me in</span>
        </button>

        <div class="login-error" id="login-error"></div>

        <div class="login-hint">
          P.S. If you forgot it, text me ‚Äúyour website gate is gatekeeping me‚Äù and I‚Äôll resend. ü´∂
        </div>
      </div>
    </div>
  </div>

  <!-- ADMIN OVERLAY -->
  <div class="login-screen" id="admin-screen">
    <div class="login-card admin-card">
      <div class="login-orb red"></div>
      <div class="login-orb green"></div>
      <div class="login-inner">
        <div class="admin-header">
          <div class="login-title">
            <span class="icon">üõ†Ô∏è</span>
            <span>Admin dashboard</span>
          </div>
          <button class="admin-close" id="admin-close">
            <span>‚úñÔ∏è</span>
            <span>Close</span>
          </button>
        </div>
        <div class="login-subtitle">
          View Rose‚Äôs progress, answers, and love points. Synced via cloud (Firestore) for this login.
        </div>

        <div id="admin-login-section">
          <div class="login-label">Admin code</div>
          <div class="login-input-wrap">
            <span>üß†</span>
            <input
              id="admin-password"
              type="password"
              placeholder="Type your admin password"
            />
          </div>
          <button class="login-btn" id="admin-login-button" type="button">
            <span class="icon">üîì</span>
            <span>Unlock admin view</span>
          </button>
          <div class="login-error" id="admin-error"></div>
        </div>

        <div class="admin-content" id="admin-content" style="display:none;">
          <div class="admin-actions">
            <button class="admin-reset" id="admin-reset-button" type="button">
              üß® Reset all data (dev only)
            </button>
          </div>

          <div class="admin-summary" id="admin-summary"></div>
          <div class="admin-table-wrapper">
            <table class="admin-table" id="admin-table">
              <thead>
                <tr>
                  <th>Day</th>
                  <th>Title</th>
                  <th>Type</th>
                  <th>Completed?</th>
                  <th>Mood</th>
                  <th>Selections</th>
                  <th>Answer / Notes</th>
                </tr>
              </thead>
              <tbody id="admin-table-body"></tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- MAIN APP -->
  <div class="app" id="main-app">
    <div class="orb red"></div>
    <div class="orb green"></div>
    <div class="orb blue"></div>

    <div class="app-inner">
      <header>
        <div class="title-block">
          <div class="badge-row">
            <div class="badge"><span class="icon">üéÑ</span> 30-Day Christmas Love Drop</div>
            <div class="badge"><span class="icon">üíå</span> Daily wish + tiny game</div>
            <div class="badge"><span class="icon">‚ú®</span> Made just for Rose</div>
          </div>
          <h1>
            30 Days of Christmas With <span id="gf-name-display">Rose</span>
            <span class="emojis">üéÖüèª‚ù§Ô∏è</span>
          </h1>
          <p class="subtitle">
            Every day is a little Christmas surprise: a love note, a tiny game, a dare, or a mood-check. 
            Open one box at a time and let me soft-spam you with love like the clingy Gen Z I am. üòå
          </p>
          <div class="progress-wrapper">
            <span id="progress-text">0 / 30 days completed</span>
            <div class="progress-bar">
              <div class="progress-fill" id="progress-fill"></div>
            </div>
          </div>
        </div>
        <div class="name-form">
          <label for="gf-name">Customise it for you:</label>
          <div class="name-right">
            <div class="pill">
              <div class="pill-inner">
                <input
                  id="gf-name"
                  type="text"
                  placeholder="Your name / nickname (e.g. chaos queen)"
                />
                <button class="pill-button" id="save-name">
                  <span>‚ú®</span> Save
                </button>
              </div>
            </div>
            <div class="love-points-pill">
              <span class="icon">‚ù§Ô∏è</span>
              <span>Love points:</span>
              <strong id="love-points">0</strong>
            </div>
          </div>
        </div>
      </header>

      <div class="layout">
        <section class="calendar-card">
          <div class="calendar-header">
            <div class="calendar-header-left">
              <div class="calendar-title">
                <span>üìÜ</span> Tap a day to open your surprise
              </div>
              <div class="calendar-sub">
                One card per real-life day only. No binging ahead üëÄ
                We‚Äôre doing this slow-burn Christmas rom-com properly.
              </div>
            </div>
            <div class="calendar-badge">
              <span class="icon">üïäÔ∏è</span>
              0% cringe, 100% real
            </div>
          </div>

          <div class="grid" id="calendar-grid"></div>
        </section>

        <aside class="side-card">
          <div class="side-top">
            <div>
              <div class="side-title">
                <span>üí¨</span> Example day message
              </div>
              <div class="side-tagline">
                You‚Äôll see something like this when you open a day.
              </div>
            </div>
            <div class="side-pill">
              <span>üëÄ</span> Preview mode
            </div>
          </div>

          <div class="preview-bubble">
            <div class="preview-bubble-inner">
              <div class="pfp">üéß</div>
              <div class="preview-text-block">
                <div class="preview-name-row">
                  <strong>Me</strong>
                  <span class="dot-sep"></span>
                  <span class="time">Day 5 ¬∑ 10:24 PM</span>
                </div>
                <div class="preview-main">
                  Hey <span id="gf-name-inline">Rose</span>, tonight‚Äôs task is simple:
                  pick a song that feels like ‚Äúus‚Äù, send it to me, and tell me why you chose it.
                  I wanna hear the soundtrack inside your head. <span class="emoji">üé∂üíö</span>
                </div>
                <div class="preview-meta">
                  + Bonus: I‚Äôll send you a voice note replying to your song like a dramatic Spotify review.
                </div>
              </div>
            </div>
          </div>

          <ul class="tips-list">
            <li>
              <span class="bullet">üéÅ</span>
              <span>Open one card per day and send me a screenshot so I know you did your ‚ÄúChristmas homework‚Äù.</span>
            </li>
            <li>
              <span class="bullet">üì±</span>
              <span>Most prompts are meant to be done over chat / video call, so I can tease you live.</span>
            </li>
            <li>
              <span class="bullet">ü´∂</span>
              <span>As you mark tasks as done, your love points go up. Yes, I‚Äôm literally gamifying loving me.</span>
            </li>
          </ul>
        </aside>
      </div>

      <footer>
        <span>
          Built for <span id="gf-name-footer">Rose</span> ¬∑ 30 days of soft-launching my feelings over and over again.
        </span>
        <span class="hero">
          From me, your low-budget Christmas rom-com hero üé¨‚ù§Ô∏è
        </span>
        <button class="admin-link" id="admin-open">Admin</button>
      </footer>
    </div>
  </div>

  <!-- Modal -->
  <div class="modal-backdrop" id="modal-backdrop">
    <div class="modal" role="dialog" aria-modal="true">
      <div class="modal-header">
        <div class="modal-header-main">
          <div class="modal-day-pill">
            <span class="emoji" id="modal-emoji">üéÑ</span>
            <span id="modal-type-label">Love drop</span>
          </div>
          <div class="modal-title">
            <span class="day-num" id="modal-day-num">Day 1</span>
            <span id="modal-title-text">Title</span>
          </div>
        </div>
        <button class="modal-close" id="modal-close">
          <span class="icon">‚úñÔ∏è</span>
          Close
        </button>
      </div>
      <div class="modal-body">
        <div class="wish-text" id="modal-wish"></div>
        <div class="activity-block" id="modal-activity"></div>
        <button class="primary-btn" id="done-button" type="button">
          <span class="icon">‚úÖ</span>
          <span id="done-button-label">Mark this task as done (+10 ‚ù§Ô∏è)</span>
        </button>
        <div class="tiny">
          P.S. If you actually do this, you earn +1000 points on the ‚Äúbest human on Earth‚Äù leaderboard that exists in my head.
        </div>
      </div>
    </div>
  </div>

  <script type="module">
  /* -------------------------------------------------
     1) FIREBASE IMPORTS (CLEAN + CORRECT)
  --------------------------------------------------*/
  import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.0/firebase-app.js";
  import {
    getFirestore,
    doc,
    getDoc,
    setDoc,
    deleteDoc
  } from "https://www.gstatic.com/firebasejs/11.0.0/firebase-firestore.js";

  /* -------------------------------------------------
     2) FIREBASE CONFIG
  --------------------------------------------------*/
  const firebaseConfig = {
    apiKey: "AIzaSyDDmoePihLpjM5pmkZuIQAAajw8mtM9UU4",
    authDomain: "xmas-rose.firebaseapp.com",
    projectId: "xmas-rose",
    storageBucket: "xmas-rose.firebasestorage.app",
    messagingSenderId: "1087656471298",
    appId: "1:1087656471298:web:9cc720ec67de2ba01bb01b",
    measurementId: "G-J6X39P4NBZ"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);
  const userDocRef = doc(db, "xmasUsers", "rose");

  /* -------------------------------------------------
     3) CONSTANTS & SELECTORS
  --------------------------------------------------*/
  const LOGIN_PASSWORD = "mychristmascode";
  const ADMIN_PASSWORD = "adminrose";

  const LOGIN_KEY = "xmas_login_ok_v1";
  const LOVE_POINTS_KEY = "love_points_v1";
  const COMPLETED_DAYS_KEY = "completed_days_v1";
  const OPENED_PER_DATE_KEY = "opened_per_date_v1";
  const ACTIVITY_LOGS_KEY = "activity_logs_v1";
  const POINTS_PER_TASK = 10;

  /* 3B) STATIC DATA ‚Äì COMPLIMENTS + 30 DAYS */
  const compliments = [
    "You are my favourite notification of the day.",
    "If softness had a face, it would look exactly like you.",
    "You don‚Äôt even realise how effortlessly loveable you are. Hehe just kidding (but also not).",
    "You‚Äôre the calm and the chaos at the same time and I‚Äôm obsessed.",
    "You walking into my life is still my favourite plot twist.",
    "You make even the most boring days feel like a movie scene.",
    "Your laugh is my comfort sound.",
    "Mutheee‚Ä¶ I‚Äôm still not over you.",
    "I don‚Äôt believe in perfect people, but you‚Äôre dangerously close.",
    "You‚Äôre my favourite place to emotionally overshare.",
    "I love you my Chaos Queen.",
    "You make my idea of ‚Äòhome‚Äô feel like a person, not a place."
  ];

  const daysData = [
    {
      day: 1,
      label: "Soft start",
      type: "loveNote",
      emoji: "üéÑ",
      wish: [
        "Day 1 of 30. No pressure, just vibes.",
        "Tonight, just read this and let it sink in: I am genuinely so grateful that you exist in my life. Not in a dramatic movie way, but in the tiny everyday way ‚Äì the random messages, the sleepy calls, the way you just <i>are</i>."
      ],
      activity: {
        heading: "Tiny reflection",
        description: "Think of the very first moment where you felt, ‚Äòhmm‚Ä¶ this person might be a little too important to me.‚Äô",
        note: "You don‚Äôt have to tell me, but you <i>can</i> write it in the box below if you want."
      }
    },
    {
      day: 2,
      label: "Cozy choices",
      type: "thisOrThat",
      emoji: "‚òï",
      wish: [
        "Today is tiny choice day.",
        "I want to know your chaos preferences, so I can bully you more accurately later. ü´∂"
      ],
      activity: {
        heading: "Pick your chaos",
        description: "Tap the ones that feel the most ‚Äòyou‚Äô right now.",
        options: [
          "Warm chai + overthinking",
          "Cold coffee + zero thoughts head empty",
          "Night calls",
          "Random voice notes",
          "Inside jokes only we understand",
          "You roasting me with love",
          "Hugs and kisses"
        ],
        note: "You can pick more than one. Obviously, you‚Äôre complicated."
      }
    },
    {
      day: 3,
      label: "Flirty quick game",
      type: "quiz",
      emoji: "üî•",
      wish: [
        "Ok, tiny spicy upgrade.",
        "Today is about you confessing things‚Ä¶ in the safest, most unserious way. üòà"
      ],
      activity: {
        heading: "Spicy rapid-fire",
        description: "Answer in the box, or later on chat. No overthinking, just first instinct.",
        note: "Think of it like a soft ‚Äòtruth‚Äô round, Gen Z."
      }
    },
    {
      day: 4,
      label: "Compliment drop",
      type: "compliment",
      emoji: "üíñ",
      wish: [
        "Today you‚Äôre banned from being mean to yourself.",
        "If your brain starts bullying you, open this card and let me cancel it with a compliment."
      ],
      activity: {
        heading: "Tap for a compliment",
        description: "Hit the button as many times as you want. There is no limit on how much love you‚Äôre allowed to receive in a day."
      }
    },
    {
      day: 5,
      label: "Our soundtrack",
      type: "quiz",
      emoji: "üéß",
      wish: [
        "I love knowing what songs remind you of us.",
        "Tonight‚Äôs mission is music-flavoured."
      ],
      activity: {
        heading: "Song for ‚Äòus‚Äô",
        description: "Pick one song that feels like ‚Äòus‚Äô and send it to me later.",
        note: "In the answer box you can also drop a lyric, or just type why you picked it."
      }
    },
    {
      day: 6,
      label: "Deeper feelings",
      type: "quiz",
      emoji: "‚ù§Ô∏è",
      wish: [
        "We‚Äôre 6 days in, so we‚Äôre allowed to be slightly deeper now.",
        "Still soft, still safe, don‚Äôt panic."
      ],
      activity: {
        heading: "Three tiny questions",
        description: "Answer these in your own time ‚Äî in your head, in the box, or over chat.",
        note: "No exam, no grading. I just want your honest brain."
      }
    },
    {
      day: 7,
      label: "Truth or spice",
      type: "quiz",
      emoji: "üå∂Ô∏è",
      wish: [
        "End of week 1. Time for a playful little confession day.",
        "Nothing dramatic, just you being a tiny bit honest about us."
      ],
      activity: {
        heading: "Soft truth round",
        description: "Pick one thing you‚Äôd tell me if we were playing truth-or-dare and you chose ‚Äòtruth‚Äô.",
        note: "Can be serious, funny, flirty ‚Äì your choice."
      }
    },
    {
      day: 8,
      label: "Future tiny dream",
      type: "simpleTask",
      emoji: "üåå",
      wish: [
        "Let‚Äôs be delusional for a second. Your fav word hehe.",
        "Not in a 5-year plan way. In a ‚Äòtiny fantasy moment‚Äô way."
      ],
      activity: {
        heading: "Small ‚Äòone day‚Äô dream",
        description: "Think of a small future moment with me (coffee date, movie night, first night, cooking disaster together, random road trip).",
        note: "Write it if you want. Or just picture it and smile to yourself like a weirdo."
      }
    },
    {
      day: 9,
      label: "Naughty or nice",
      type: "quiz",
      emoji: "üéÖ",
      wish: [
        "Santa is checking your file.",
        "Today is about all the ways you‚Äôve been ‚Äònice‚Äô and ‚Äònaughty‚Äô with me this year."
      ],
      activity: {
        heading: "List check",
        description: "Think Christmas list, but it‚Äôs just about us.",
        note: "You can keep it wholesome or a tiny bit chaotic, your choice."
      }
    },
    {
      day: 10,
      label: "Love note",
      type: "loveNote",
      emoji: "üïØÔ∏è",
      wish: [
        "You don‚Äôt have to do anything special to deserve consistency and care.",
        "You are not ‚Äòtoo much‚Äô for needing reassurance or softness. You‚Äôre human."
      ],
      activity: {
        heading: "Gentle reminder",
        description: "Write one sentence to yourself that you wish you believed more often.",
        note: "You can also screenshot it and send it to me so I can repeat it back to you when you forget."
      }
    },
    {
      day: 11,
      label: "Long-distance confessions",
      type: "quiz",
      emoji: "‚úàÔ∏è",
      wish: [
        "Some days the distance hits harder than usual.",
        "Today is for admitting what you actually miss the most."
      ],
      activity: {
        heading: "Miss-you edition",
        description: "Think about one specific thing you‚Äôre craving from me right now ‚Äì a hug, a look, a stupid joke, a fight+makeup, anything.",
        note: "Write it down so I know what to over-deliver on when we meet."
      }
    },
    {
      day: 12,
      label: "Christmas wishlist",
      type: "quiz",
      emoji: "üéÅ",
      wish: [
        "Today is your Christmas wishlist day.",
        "Not gifts ‚Äì moments."
      ],
      activity: {
        heading: "Moment wishlist",
        description: "List 3 tiny, realistic things you‚Äôd love us to do together in the next year.",
        note: "Think small but cute ‚Äì movie nights, cities, food, rituals."
      }
    },
    {
      day: 13,
      label: "Memory lane",
      type: "quiz",
      emoji: "üìù",
      wish: [
        "I still replay random moments with you in my head like a favourite scene.",
        "Your turn now."
      ],
      activity: {
        heading: "Little flashback",
        description: "Think of one tiny, random moment with me that makes you smile.",
        note: "Write about it if you feel like it. Even one line is enough."
      }
    },
    {
      day: 14,
      label: "Rom-com choices",
      type: "thisOrThat",
      emoji: "üçø",
      wish: [
        "We‚Äôre almost halfway, so obviously it‚Äôs time for some chaos preferences again.",
        "Rom-com edition."
      ],
      activity: {
        heading: "What kind of us are we?",
        description: "Tap everything you‚Äôd like to experience with me IRL.",
        options: [
          "Movie night + snacks",
          "Late night drive",
          "Beach walk + oversharing",
          "Grocery shopping date",
          "Stay-in rainy day",
          "Sunrise or sunset together"
        ]
      }
    },
    {
      day: 15,
      label: "Would you rather: us",
      type: "quiz",
      emoji: "üòâ",
      wish: [
        "Halfway through 30 days, so let‚Äôs play.",
        "Today is unserious but kind of exposing. üòå"
      ],
      activity: {
        heading: "‚ÄòUs‚Äô edition",
        description: "Answer in your head or in the box ‚Äì I dare you to be honest.",
        note: "This is literally fanfic-writing our relationship."
      }
    },
    {
      day: 16,
      label: "Love note",
      type: "loveNote",
      emoji: "üéÅ",
      wish: [
        "Sometimes I wish I could physically wrap comfort around you like a blanket.",
        "Since I can‚Äôt, this will have to do for now: you are not alone in anything you‚Äôre going through."
      ],
      activity: {
        heading: "Gentle brain dump",
        description: "If your mind is noisy today, unload a bit here. No structure needed.",
        note: "You don‚Äôt have to send it. This space is just for you."
      }
    },
    {
      day: 17,
      label: "Us, then & now",
      type: "quiz",
      emoji: "ü™û",
      wish: [
        "We‚Äôve changed a lot since the start ‚Äì individually and together.",
        "I like this version of us a lot."
      ],
      activity: {
        heading: "Then vs now",
        description: "Reflect on how your view of me/us has shifted.",
        note: "Even if the answer is ‚ÄòI got more attached than planned‚Äô, that still counts."
      }
    },
    {
      day: 18,
      label: "Secret soft spots",
      type: "quiz",
      emoji: "üå∑",
      wish: [
        "Reminder: you are not hard to love.",
        "Your mind lies. I don‚Äôt."
      ],
      activity: {
        heading: "Soft spot confessions",
        description: "Today is about the tiny things that melt you.",
        note: "You‚Äôre allowed to be shamelessly soft here."
      }
    },
    {
      day: 19,
      label: "How to love you better",
      type: "quiz",
      emoji: "üì±",
      wish: [
        "Communication style edition.",
        "Help me fine-tune how I should show up for you."
      ],
      activity: {
        heading: "Upgrade me",
        description: "Tell me exactly how to be better for you.",
        note: "Yes, I‚Äôm literally asking for a manual."
      }
    },
    {
      day: 20,
      label: "Love note",
      type: "loveNote",
      emoji: "üß£",
      wish: [
        "I don‚Äôt ever want you to shrink yourself to be ‚Äòeasier‚Äô to love.",
        "I‚Äôd rather learn your storms properly than only know the sunny version of you."
      ],
      activity: {
        heading: "Safe thoughts",
        description: "Write one thing you‚Äôre scared to say out loud sometimes.",
        note: "If you ever want to share it with me, I‚Äôll hold it gently."
      }
    },
    {
      day: 21,
      label: "Spicy what-if",
      type: "quiz",
      emoji: "üí´",
      wish: [
        "End-of-month energy.",
        "Let‚Äôs be a bit delulu again, but in a very us-core way."
      ],
      activity: {
        heading: "What if we were together today?",
        description: "Imagine we magically had today together in the same city. What‚Äôs the first thing you‚Äôd drag me to do with you?",
        note: "Coffee, cuddles, fight+makeup, shopping, chaos? Your call."
      }
    },
    {
      day: 22,
      label: "Compliment drop",
      type: "compliment",
      emoji: "‚≠ê",
      wish: [
        "Every time you doubt yourself, remember there‚Äôs a whole version of you I‚Äôm in love with that you haven‚Äôt fully seen yet.",
        "Tap to borrow my perspective for a sec."
      ],
      activity: {
        heading: "Perspective swap",
        description: "Hit the button and let me talk about you like you deserve."
      }
    },
    {
      day: 23,
      label: "Movie scene",
      type: "quiz",
      emoji: "üé¨",
      wish: [
        "If our story was a movie, it would have so many underrated scenes.",
        "Pick one in your head right now."
      ],
      activity: {
        heading: "Favourite scene so far",
        description: "What‚Äôs one moment with me you never expected to matter this much?",
        note: "This can be as silly or as deep as you want."
      }
    },
    {
      day: 24,
      label: "Cozy mode",
      type: "thisOrThat",
      emoji: "üç∞",
      wish: [
        "Christmas-eve eve energy.",
        "Today is about soft, cosy preferences."
      ],
      activity: {
        heading: "Cozy mode selector",
        description: "Tap everything that sounds like a perfect chill day with me.",
        options: [
          "Pyjamas all day",
          "Sharing a blanket",
          "Cooking something together",
          "Binge-watching something dumb",
          "Video call while doing nothing",
          "Afternoon nap together (one day)"
        ]
      }
    },
    {
      day: 25,
      label: "Christmas day",
      type: "loveNote",
      emoji: "üéÖüèª",
      wish: [
        "Merry Christmas, you menace.",
        "If I could teleport, I‚Äôd be next to you right now with food, a hug, and a stupid amount of affection."
      ],
      activity: {
        heading: "Christmas wish",
        description: "If you could have one tiny, realistic wish with me today, what would it be? Also one long paragraph about anything: us, your day, your hopes, your chaos.",
        note: "Send it to me later so I can see how many I can actually make happen."
      }
    },
    {
      day: 26,
      label: "Late night Qs",
      type: "quiz",
      emoji: "üåô",
      wish: [
        "Post-Christmas crash = overthinking hours.",
        "So let‚Äôs direct that overthinking towards us, obviously."
      ],
      activity: {
        heading: "Sleepover questions (virtual)",
        description: "Think of this as a 2 AM call vibe: one thing you want us to do more, and one thing you secretly love that we already do.",
        note: "Write it here or send it to me when the mood hits."
      }
    },
    {
      day: 27,
      label: "Year reflection",
      type: "quiz",
      emoji: "üìÜ",
      wish: [
        "We survived another year somehow.",
        "And you being in my year automatically upgraded it."
      ],
      activity: {
        heading: "Year-end reflection",
        description: "Three small questions about this year and us.",
        note: "Be honest. Even if the answer is ‚Äòit was messy but worth it‚Äô."
      }
    },
    {
      day: 28,
      label: "Bedtime softness",
      type: "quiz",
      emoji: "üåô",
      wish: [
        "You deserve soft words on the days you feel the least worthy of them.",
        "So obviously I‚Äôm giving you some."
      ],
      activity: {
        heading: "Night thoughts",
        description: "Right before you sleep today, think about this: what feeling do you want more of with us next year?",
        note: "You can write it here so we don‚Äôt forget."
      }
    },
    {
      day: 29,
      label: "Future episodes",
      type: "thisOrThat",
      emoji: "üß≠",
      wish: [
        "Almost the last day.",
        "Let‚Äôs talk future ‚Äòus‚Äô in a very unserious way."
      ],
      activity: {
        heading: "Future episodes",
        description: "Tap every scenario you‚Äôd like to see an episode of in our story.",
        options: [
          "Airport reunion",
          "Surprise visit",
          "Random weekend trip",
          "Cooking date disaster",
          "Midnight walk after a fight",
          "Slow dancing in the kitchen"
        ]
      }
    },
    {
      day: 30,
      label: "Soft finale",
      type: "loveNote",
      emoji: "üéá",
      wish: [
        "30 days later and I still want you. That should tell you something.",
        "Thank you for existing, for staying, for trying, for choosing me in all the tiny ways you do."
      ],
      activity: {
        heading: "Final note",
        description: "Write anything you want to tell future-you or future-us.",
        note: "Whatever you write here is your own little time capsule."
      }
    }
  ];

  /* LOGIN ELEMENTS */
  const loginScreen = document.getElementById("login-screen");
  const loginInput = document.getElementById("login-password");
  const loginBtn = document.getElementById("login-button");
  const loginError = document.getElementById("login-error");

  /* MAIN APP */
  const mainApp = document.getElementById("main-app");

  /* ADMIN */
  const adminScreen = document.getElementById("admin-screen");
  const adminOpenBtn = document.getElementById("admin-open");
  const adminCloseBtn = document.getElementById("admin-close");
  const adminLoginSection = document.getElementById("admin-login-section");
  const adminInput = document.getElementById("admin-password");
  const adminLoginBtn = document.getElementById("admin-login-button");
  const adminError = document.getElementById("admin-error");
  const adminContent = document.getElementById("admin-content");
  const adminSummary = document.getElementById("admin-summary");
  const adminTableBody = document.getElementById("admin-table-body");
  const adminResetBtn = document.getElementById("admin-reset-button");

  /* NAME */
  const nameInput = document.getElementById("gf-name");
  const saveNameBtn = document.getElementById("save-name");
  const nameDisplay = document.getElementById("gf-name-display");
  const nameInline = document.getElementById("gf-name-inline");
  const nameFooter = document.getElementById("gf-name-footer");

  /* STATS */
  const lovePointsSpan = document.getElementById("love-points");
  const progressText = document.getElementById("progress-text");
  const progressFill = document.getElementById("progress-fill");

  /* CALENDAR, MODAL */
  const grid = document.getElementById("calendar-grid");
  const modalBackdrop = document.getElementById("modal-backdrop");
  const modalClose = document.getElementById("modal-close");
  const modalEmoji = document.getElementById("modal-emoji");
  const modalTypeLabel = document.getElementById("modal-type-label");
  const modalDayNum = document.getElementById("modal-day-num");
  const modalTitleText = document.getElementById("modal-title-text");
  const modalWish = document.getElementById("modal-wish");
  const modalActivity = document.getElementById("modal-activity");
  const doneButton = document.getElementById("done-button");
  const doneButtonLabel = document.getElementById("done-button-label");

  let lovePoints = Number(localStorage.getItem(LOVE_POINTS_KEY) || "0");
  let completedDays = [];
  let openedPerDate = {};
  let activityLogs = {};
  let currentDayObj = null;
  const dayCardMap = {};

  /* -------------------------------------------------
     4) LOGIN LOGIC
  --------------------------------------------------*/
  function showApp() {
    loginScreen.style.display = "none";
    mainApp.style.display = "block";
  }

  function handleLogin() {
    const val = loginInput.value.trim();
    if (val === LOGIN_PASSWORD) {
      localStorage.setItem(LOGIN_KEY, "true");
      showApp();
    } else {
      loginError.textContent = "Wrong code. Try again üò§";
    }
  }

  if (localStorage.getItem(LOGIN_KEY) === "true") {
    showApp();
  }

  loginBtn.addEventListener("click", handleLogin);
  loginInput.addEventListener("keydown", (e) => {
    if (e.key === "Enter") handleLogin();
  });

  /* -------------------------------------------------
     5) ADMIN LOGIC
  --------------------------------------------------*/
  adminOpenBtn.addEventListener("click", () => {
    adminScreen.style.display = "flex";
    adminError.textContent = "";
    adminInput.value = "";
    adminContent.style.display = "none";
    adminLoginSection.style.display = "block";
  });

  adminCloseBtn.addEventListener("click", () => {
    adminScreen.style.display = "none";
  });

  function renderAdminView() {
    const totalCompleted = completedDays.length;
    const percent = Math.round((totalCompleted / 30) * 100);

    adminSummary.innerHTML = `
      <div><strong>Love points:</strong> ${lovePoints}</div>
      <div><strong>Days completed:</strong> ${totalCompleted} / 30 (${percent}%)</div>
    `;

    adminTableBody.innerHTML = "";
    daysData.forEach((d) => {
      const log = activityLogs[d.day] || {};
      const tr = document.createElement("tr");
      const mood = log.mood ?? "-";
      const selections = log.selections?.join(" | ") || "-";
      const answer = log.answer?.replace(/\n/g, " / ") || "-";

      tr.innerHTML = `
        <td>${d.day}</td>
        <td>${d.label}</td>
        <td>${d.type}</td>
        <td>${completedDays.includes(d.day) ? "Yes" : "No"}</td>
        <td>${mood}</td>
        <td>${selections}</td>
        <td>${answer}</td>
      `;
      adminTableBody.appendChild(tr);
    });
  }

  function handleAdminLogin() {
    if (adminInput.value.trim() === ADMIN_PASSWORD) {
      adminLoginSection.style.display = "none";
      adminContent.style.display = "block";
      renderAdminView();
    } else {
      adminError.textContent = "Wrong admin code.";
    }
  }

  adminLoginBtn.addEventListener("click", handleAdminLogin);
  adminInput.addEventListener("keydown", (e) => {
    if (e.key === "Enter") handleAdminLogin();
  });

  /* -------------------------------------------------
     6) NAME SAVING
  --------------------------------------------------*/
  function setNameEverywhere(name) {
    const clean = name.trim() || "Rose";
    nameDisplay.textContent = clean;
    nameFooter.textContent = clean;
    nameInline.textContent = clean;
  }

  const storedName = localStorage.getItem("gfName") || "Rose";
  setNameEverywhere(storedName);
  nameInput.value = storedName;

  saveNameBtn.addEventListener("click", () => {
    const n = nameInput.value.trim() || "Rose";
    localStorage.setItem("gfName", n);
    setNameEverywhere(n);
  });

  /* -------------------------------------------------
     7) LOAD LOCAL STATE
  --------------------------------------------------*/
  try { completedDays = JSON.parse(localStorage.getItem(COMPLETED_DAYS_KEY) || "[]"); } catch {}
  try { openedPerDate = JSON.parse(localStorage.getItem(OPENED_PER_DATE_KEY) || "{}"); } catch {}
  try { activityLogs = JSON.parse(localStorage.getItem(ACTIVITY_LOGS_KEY) || "{}"); } catch {}

  function updateLovePointsDisplay() { lovePointsSpan.textContent = lovePoints; }
  function updateProgress() {
    const done = completedDays.length;
    progressText.textContent = `${done} / 30 days completed`;
    progressFill.style.width = `${(done / 30) * 100}%`;
  }
  updateLovePointsDisplay();
  updateProgress();

  /* -------------------------------------------------
     8) FIRESTORE ‚Äì LOAD + SAVE
  --------------------------------------------------*/
  async function loadFromCloud() {
    try {
      const snap = await getDoc(userDocRef);
      if (!snap.exists()) return;

      const data = snap.data();

      if (typeof data.lovePoints === "number") lovePoints = data.lovePoints;
      if (Array.isArray(data.completedDays)) completedDays = data.completedDays;
      if (data.openedPerDate) openedPerDate = data.openedPerDate;
      if (data.activityLogs) activityLogs = data.activityLogs;
      if (data.gfName) {
        localStorage.setItem("gfName", data.gfName);
        setNameEverywhere(data.gfName);
        nameInput.value = data.gfName;
      }

      updateLovePointsDisplay();
      updateProgress();
      completedDays.forEach(updateDayCardCompleted);

    } catch (e) {
      console.error("Cloud load failed:", e);
    }
  }
  loadFromCloud();

  async function saveLoveState() {
    localStorage.setItem(LOVE_POINTS_KEY, lovePoints);
    localStorage.setItem(COMPLETED_DAYS_KEY, JSON.stringify(completedDays));
    localStorage.setItem(OPENED_PER_DATE_KEY, JSON.stringify(openedPerDate));
    localStorage.setItem(ACTIVITY_LOGS_KEY, JSON.stringify(activityLogs));

    try {
      await setDoc(
        userDocRef,
        {
          lovePoints,
          completedDays,
          openedPerDate,
          activityLogs,
          gfName: localStorage.getItem("gfName") || "Rose",
          updatedAt: new Date().toISOString()
        },
        { merge: true }
      );
    } catch (e) {
      console.error("Cloud save failed:", e);
    }
  }

  /* -------------------------------------------------
     9) ADMIN RESET ALL DATA
  --------------------------------------------------*/
  function resetDayCard(day) {
    const card = dayCardMap[day];
    if (!card) return;
    card.classList.remove("completed");
    const d = daysData.find((x) => x.day === day);
    card.querySelector(".day-tag").textContent = d.label;
    card.querySelector(".day-status span:last-child").textContent = "Ready to open";
    card.querySelector(".day-cta").textContent = "Open ‚ú®";
    card.querySelector(".day-emoji").textContent = d.emoji;
  }

  adminResetBtn.addEventListener("click", async () => {
    if (!confirm("Reset ALL data? This cannot be undone.")) return;

    lovePoints = 0;
    completedDays = [];
    openedPerDate = {};
    activityLogs = {};

    localStorage.clear();

    try {
      await deleteDoc(userDocRef);
    } catch (e) {
      console.warn(e);
    }

    daysData.forEach((d) => resetDayCard(d.day));
    updateLovePointsDisplay();
    updateProgress();

    alert("Reset complete. Reloading‚Ä¶");
    location.reload();
  });

  /* -------------------------------------------------
     10) CALENDAR + MODAL
  --------------------------------------------------*/
  function isToday(day) {
    const now = new Date();
    return now.getMonth() === 11 && now.getDate() === day;
  }

  function isLocked(day) {
    const now = new Date();
    if (now.getMonth() !== 11) return false;
    return day > now.getDate();
  }

  function getTodayKey() {
    return new Date().toISOString().slice(0, 10);
  }

  daysData.forEach((d) => {
    const card = document.createElement("button");
    card.className = "day";
    card.dataset.day = d.day;

    if (isLocked(d.day)) card.classList.add("locked");
    if (isToday(d.day)) card.classList.add("today");
    if (completedDays.includes(d.day)) card.classList.add("completed");

    card.innerHTML = `
      <div class="day-main">
        <div>
          <div class="day-number">${d.day}</div>
          <div class="day-tag">${completedDays.includes(d.day) ? "Completed" : d.label}</div>
        </div>
        <div class="day-emoji">${completedDays.includes(d.day) ? "‚ù§Ô∏è" : isLocked(d.day) ? "üîí" : d.emoji}</div>
      </div>
      <div class="day-footer">
        <div class="day-status">
          <div class="dot"></div>
          <span>${completedDays.includes(d.day) ? "Done ¬∑ reopen" : isLocked(d.day) ? "Locked" : "Ready to open"}</span>
        </div>
        <div class="day-cta">${completedDays.includes(d.day) ? "View again" : "Open ‚ú®"}</div>
      </div>
    `;

    if (!isLocked(d.day)) {
      card.addEventListener("click", () => {
        const todayKey = getTodayKey();
        const opened = openedPerDate[todayKey];

        if (opened && opened !== d.day) {
          alert(`You already opened Day ${opened} today. Come back tomorrow üíå`);
          return;
        }

        if (!opened) {
          openedPerDate[todayKey] = d.day;
          saveLoveState();
        }

        openModal(d);
      });
    }

    grid.appendChild(card);
    dayCardMap[d.day] = card;
  });

  function updateDayCardCompleted(day) {
    const card = dayCardMap[day];
    if (!card) return;
    card.classList.add("completed");
    card.querySelector(".day-tag").textContent = "Completed";
    card.querySelector(".day-status span:last-child").textContent = "Done ¬∑ reopen";
    card.querySelector(".day-cta").textContent = "View again";
    card.querySelector(".day-emoji").textContent = "‚ù§Ô∏è";
  }

  /* -------------------------------------------------
     11) MODAL + ACTIVITY RENDERING
  --------------------------------------------------*/
  function openModal(d) {
    currentDayObj = d;

    modalEmoji.textContent = d.emoji;
    modalDayNum.textContent = `Day ${d.day}`;
    modalTitleText.textContent = `¬∑ ${d.label}`;

    const typeLabels = {
      loveNote: "Soft love note",
      mood: "Mood check",
      compliment: "Compliment drop",
      thisOrThat: "Mini game",
      simpleTask: "Tiny mission",
      quiz: "Story quiz"
    };
    modalTypeLabel.textContent = typeLabels[d.type] || "Love drop";

    modalWish.innerHTML = "";
    d.wish.forEach((w) => {
      const p = document.createElement("p");
      p.innerHTML = w;
      modalWish.appendChild(p);
    });

    renderActivity(d);

    const completed = completedDays.includes(d.day);
    updateDoneButtonState(completed);

    modalBackdrop.classList.add("active");
  }

  function closeModal() {
    modalBackdrop.classList.remove("active");
    currentDayObj = null;
  }

  modalClose.addEventListener("click", closeModal);
  modalBackdrop.addEventListener("click", (e) => {
    if (e.target === modalBackdrop) closeModal();
  });
  document.addEventListener("keydown", (e) => {
    if (e.key === "Escape") closeModal();
  });

  /* -------------------------------------------------
     12) DONE BUTTON
  --------------------------------------------------*/
  function updateDoneButtonState(completed) {
    if (completed) {
      doneButton.disabled = true;
      doneButton.classList.add("disabled");
      doneButtonLabel.textContent = "Already marked as done ‚ù§Ô∏è";
    } else {
      doneButton.disabled = false;
      doneButton.classList.remove("disabled");
      doneButtonLabel.textContent = `Mark this task as done (+${POINTS_PER_TASK} ‚ù§Ô∏è)`;
    }
  }

  doneButton.addEventListener("click", () => {
    if (!currentDayObj) return;

    const day = currentDayObj.day;
    if (completedDays.includes(day)) return;

    completedDays.push(day);
    lovePoints += POINTS_PER_TASK;

    updateLovePointsDisplay();
    updateDayCardCompleted(day);
    updateProgress();
    updateDoneButtonState(true);
    saveLoveState();

    alert(`Task for Day ${day} marked as done!\n+${POINTS_PER_TASK} love points ‚ù§Ô∏è`);
  });

  /* -------------------------------------------------
     13) ACTIVITY TYPES (HIGHLIGHTS, SLIDERS, ANSWERS)
  --------------------------------------------------*/
  function ensureDayLog(day) {
    if (!activityLogs[day]) activityLogs[day] = {};
    return activityLogs[day];
  }

  function renderActivity(d) {
    const act = d.activity;
    const log = ensureDayLog(d.day);

    modalActivity.innerHTML = `
      <div class="activity-header">
        <span class="label">
          <span class="icon">${
            {
              thisOrThat: "üéÆ",
              mood: "üìä",
              quiz: "üß†",
              compliment: "üíñ"
            }[d.type] || "üìù"
          }</span>
          <span>${act.heading}</span>
        </span>
        <span class="activity-badge">${d.label}</span>
      </div>
      <div class="activity-body">${act.description}</div>
    `;

    const body = modalActivity.querySelector(".activity-body");

    /* --- thisOrThat --- */
    if (d.type === "thisOrThat" && act.options) {
      const wrap = document.createElement("div");
      wrap.className = "activity-options";

      const selected = new Set(log.selections || []);

      act.options.forEach((opt) => {
        const row = document.createElement("div");
        row.className = "option-row";
        if (selected.has(opt)) row.classList.add("selected");
        row.innerHTML = `
          <span class="text">${opt}</span>
          <button class="option-btn">Pick ü´∞</button>
        `;

        row.addEventListener("click", () => {
          const l = ensureDayLog(d.day);
          l.selections = l.selections || [];

          if (row.classList.contains("selected")) {
            row.classList.remove("selected");
            l.selections = l.selections.filter((x) => x !== opt);
          } else {
            row.classList.add("selected");
            if (!l.selections.includes(opt)) l.selections.push(opt);
          }

          activityLogs[d.day] = l;
          saveLoveState();
        });

        wrap.appendChild(row);
      });

      body.appendChild(wrap);
    }

    /* --- compliment --- */
    if (d.type === "compliment") {
      const out = document.createElement("div");
      out.className = "compliment-output";
      out.textContent = log.lastCompliment || "Tap for a compliment";

      const btn = document.createElement("button");
      btn.className = "primary-btn";
      btn.innerHTML = `<span class="icon">üíñ</span> Tap`;

      btn.addEventListener("click", () => {
        const c = compliments[Math.floor(Math.random() * compliments.length)];
        out.textContent = c;
        log.lastCompliment = c;
        activityLogs[d.day] = log;
        saveLoveState();
      });

      body.appendChild(btn);
      body.appendChild(out);
    }

    /* --- quiz questions (custom per day) --- */
    if (d.type === "quiz") {
      const wrap = document.createElement("div");
      wrap.className = "quiz-text";

      if (d.day === 3) {
        wrap.innerHTML = `
          <div><strong>1.</strong> What‚Äôs one thing about me you find unfairly attractive?</div>
          <div><strong>2.</strong> When do you miss me the most during the day?</div>
          <div><strong>3.</strong> If we were on a date tonight, where would you drag me first?</div>
        `;
      } else if (d.day === 5) {
        wrap.innerHTML = `
          <div><strong>1.</strong> Which song is ‚Äòus‚Äô and why?</div>
          <div><strong>2.</strong> Is there a lyric that low-key feels like it was written about us?</div>
        `;
      } else if (d.day === 6) {
        wrap.innerHTML = `
          <div><strong>1.</strong> First thing you noticed about me?</div>
          <div><strong>2.</strong> When did you realise you like me?</div>
          <div><strong>3.</strong> One word for our vibe?</div>
        `;
      } else if (d.day === 7) {
        wrap.innerHTML = `
          <div><strong>1.</strong> What‚Äôs one thing you‚Äôd admit only in a 2 AM call?</div>
          <div><strong>2.</strong> What‚Äôs one truth about us that makes you smile?</div>
        `;
      } else if (d.day === 9) {
        wrap.innerHTML = `
          <div><strong>1.</strong> One way you‚Äôve been ‚Äònice‚Äô to me this year?</div>
          <div><strong>2.</strong> One tiny ‚Äònaughty/chaotic‚Äô thing you‚Äôd do if we were together right now?</div>
        `;
      } else if (d.day === 11) {
        wrap.innerHTML = `
          <div><strong>1.</strong> What do you miss the most about having me physically there?</div>
          <div><strong>2.</strong> What‚Äôs one moment you‚Äôre dying to experience with me in person?</div>
        `;
      } else if (d.day === 12) {
        wrap.innerHTML = `
          <div><strong>1.</strong> Three tiny things you want us to do together next year?</div>
          <div><strong>2.</strong> Which one of those is priority no.1?</div>
        `;
      } else if (d.day === 13) {
        wrap.innerHTML = `
          <div><strong>1.</strong> Which random moment with me replays in your head?</div>
          <div><strong>2.</strong> Why that one?</div>
        `;
      } else if (d.day === 15) {
        wrap.innerHTML = `
          <div><strong>1.</strong> Would you rather we have a chaotic first trip or a cozy first stay-in weekend?</div>
          <div><strong>2.</strong> Would you rather I surprise-visit you or you surprise-visit me?</div>
          <div><strong>3.</strong> Would you rather we be low-key in public & dramatic in private, or opposite?</div>
        `;
      } else if (d.day === 17) {
        wrap.innerHTML = `
          <div><strong>1.</strong> First impression in 3 words?</div>
          <div><strong>2.</strong> What changed?</div>
          <div><strong>3.</strong> What should never change?</div>
        `;
      } else if (d.day === 18) {
        wrap.innerHTML = `
          <div><strong>1.</strong> What compliment from me do you secretly love hearing?</div>
          <div><strong>2.</strong> What tiny gesture from me makes you feel weirdly safe?</div>
        `;
      } else if (d.day === 19) {
        wrap.innerHTML = `
          <div><strong>1.</strong> When you‚Äôre low, how do you actually want me to show up?</div>
          <div><strong>2.</strong> What‚Äôs one thing I already do that you don‚Äôt want me to stop?</div>
        `;
      } else if (d.day === 21) {
        wrap.innerHTML = `
          <div><strong>1.</strong> If we had today together, what‚Äôs the first thing we‚Äôd do?</div>
          <div><strong>2.</strong> What‚Äôs one ‚Äòwild but realistic‚Äô plan you want us to do next year?</div>
        `;
      } else if (d.day === 23) {
        wrap.innerHTML = `
          <div><strong>1.</strong> If our story was a movie, what would this year‚Äôs title be?</div>
          <div><strong>2.</strong> Which moment this year would be the trailer scene?</div>
        `;
      } else if (d.day === 26) {
        wrap.innerHTML = `
          <div><strong>1.</strong> What‚Äôs one thing you want us to do more?</div>
          <div><strong>2.</strong> What‚Äôs one thing you secretly love that we already do?</div>
        `;
      } else if (d.day === 27) {
        wrap.innerHTML = `
          <div><strong>1.</strong> Best thing about us this year?</div>
          <div><strong>2.</strong> What do you want more of?</div>
          <div><strong>3.</strong> What do you want to leave behind?</div>
        `;
      } else if (d.day === 28) {
        wrap.innerHTML = `
          <div><strong>1.</strong> What feeling do you want more of with us next year?</div>
          <div><strong>2.</strong> What‚Äôs one thing you hope future-us never loses?</div>
        `;
      } else {
        wrap.innerHTML = `
          <div><strong>1.</strong> When did you feel something real with me?</div>
          <div><strong>2.</strong> One tiny moment you still think about?</div>
        `;
      }

      body.appendChild(wrap);
    }

    /* --- answer textarea (for any type) --- */
    const ans = document.createElement("div");
    ans.className = "answer-block";
    ans.innerHTML = `
      <div>Optional: write anything here üíå</div>
      <textarea placeholder="Type‚Ä¶"></textarea>
    `;

    const textarea = ans.querySelector("textarea");
    textarea.value = log.answer || "";
    textarea.addEventListener("input", () => {
      log.answer = textarea.value;
      activityLogs[d.day] = log;
      saveLoveState();
    });

    body.appendChild(ans);

    if (act.note) {
      const note = document.createElement("div");
      note.className = "activity-note";
      note.textContent = act.note;
      body.appendChild(note);
    }
  }
  </script>
</body>
</html>
